<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="精神小伙" href="https://junwide.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="精神小伙" href="https://junwide.github.io/atom.xml"><link rel="alternate" type="application/json" title="精神小伙" href="https://junwide.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Math,Rasterization"><link rel="canonical" href="https://junwide.github.io/Program/math04/"><title>Math in anywhere | Rasterization - 编程技术 | Brain Home = 精神小伙 = Tech.&Mem.</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Math in anywhere | Rasterization</h1><div class="meta"><span class="item" title="创建时间：2021-06-19 23:18:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-06-19T23:18:00+08:00">2021-06-19</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>2.3k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Brain Home</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104136.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104501.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104415.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104617.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104434.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104528.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Program/" itemprop="item" rel="index" title="分类于 编程技术"><span itemprop="name">编程技术</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://junwide.github.io/Program/math04/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Junwide Xiao"><meta itemprop="description" content="Tech.&Mem., 生活与技术"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="精神小伙"></span><div class="body md" itemprop="articleBody"><h1 id="rasterization"><a class="anchor" href="#rasterization">#</a> Rasterization</h1><p><strong>光栅化</strong> 就是将获得的图像在显示器件上成像的过程，Raster 在德语里是屏幕的意思，所以光栅化也就是在屏幕成像绘制的意思。所以我们需要了解一些屏幕成像的概念，原理和方法。</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616151844.png" alt="image-20210616151844409"></p><h2 id="basic-concept"><a class="anchor" href="#basic-concept">#</a> Basic Concept</h2><p>Pixel (short for “picture element”) 像素</p><ul><li>一个有着统一颜色的平方单位</li><li>这个颜色由三种颜色混合而来（RGB）</li></ul><p>Resolution 分辨率： 表示像素的规模</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616153452.png" alt="image-20210616153452797"></p><p>Screen Space： 屏幕空间 用于准确描述屏幕具体像素的工具</p><ul><li>像素的描述点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:.03588em">y</span><span class="mclose">)</span></span></span></span> ，其中 x 和 y 均为整数</li><li>像素点的范围从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0,0) \to (width -1,height-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02691em">w</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></li><li>像素点的中心在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mn>0.5</mn><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mn>0.5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x + 0.5,y+0.5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8388800000000001em;vertical-align:-.19444em"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:.03588em">y</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mclose">)</span></span></span></span></li><li>屏幕的覆盖范围<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi><mo separator="true">,</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0,0) \to (width,height)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02691em">w</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></li></ul><p>三角形网络：以三角形为基础元素构成的多变形 Triangle Meshes</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616155743.png" alt="image-20210616155742955"></p><p>三角形作为简单的多边形由以下的优点：</p><ul><li>能够保证是平面，一个三角形就是一个平面</li><li>有明确的内部定义</li><li>有明确的方法对顶点和重心进行插值</li></ul><h2 id="sampling"><a class="anchor" href="#sampling">#</a> Sampling</h2><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616164314.png" alt="image-20210616164314603"></p><p>我们获得目标图像后，需要通过采样的方式来获得最终那些像素需要变成什么颜色，在三角形中我们判断像素的重点是否在三角形的内部，如果是就是需要设置的点，如果不是就不需要。</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616164756.png" alt="image-20210616164756566"></p><p>根据这个我们就能写出一个基本的函数关系：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>i</mi><mi>d</mi><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.15999999999999992em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mtext></mtext><mi>i</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mtext></mtext><mi>o</mi><mi>u</mi><mi>t</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">inside(t,x,y) = \left\{ \begin{array}{c} 1 \space in \\ 0 \space out \end{array} \right.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:.03588em">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-.95003em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace"> </span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span></span></span><span style="top:-2.4099999999999997em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span><span class="mspace"> </span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.9500000000000004em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><blockquote><p>Note：这个信号领域的冲激函数非常像</p></blockquote><p>有了基本的模型我们就能写出伪代码：</p><pre><code class="language-c++">for (int x = 0; x &lt; xmax; ++x)
    for (int y = 0; y &lt; ymax; ++y)
        image[x][y] = inside(tri,x + 0.5,y + 0.5);
</code></pre><p>在 <code>inside()</code> 这个函数中，我们需要传入一个目标三角形，还有需要确认的像素点的坐标，判断点是否在三角形内。这里的判断就用到了之前提到的向量叉乘，</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616174827.png" alt="image-20210616174827378"></p><p max="">同时为了简化判断范围，我们只需考虑三角形顶点的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>→</mo><msub><mi>x</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{min} \to x_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.58056em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31166399999999994em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.58056em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.151392em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 的范围和y_{min} \to y_</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616175053.png" alt="image-20210616175053320"></p><p>通过采样出来的图像显示出来为：</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210616175207.png" alt="image-20210616175207946"></p><p>很显然，出来的效果和原图像有一定的差异，存在明显的锯齿（Jaggies）</p><h2 id="antialiasing"><a class="anchor" href="#antialiasing">#</a> Antialiasing</h2><p>因为现在图像均是通过采样后在输出来实现对图像的模拟，所有会存在不同程度的问题，我们称之为 Artifacts（瑕疵），而 Artifacts 的出现主要是因为采样出现了 Aliasing “混叠”，混叠包括空间上和时间上的，两种情况都会导致图像出现异常，而解决的方法就是了解 Aliasing 出现的原因。</p><ul><li>采样在空间上出现采样率过低体现为：锯齿</li><li>采样的空间频率没有远低于图像的空间频率：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1c3RtZWxvby9hcnRpY2xlL2RldGFpbHMvNDQ5OTQxNjU=">摩尔纹</span></li><li>采样在时间上出现采样率过低体现为：<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMzEyNzg3MzU=">车轮效应</span></li></ul><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617223716.png" alt="image-20210617223709512"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617223726.png" alt="image-20210617223726634"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617223731.png" alt="image-20210617223731391"></p><h3 id="background-knowledge"><a class="anchor" href="#background-knowledge">#</a> Background Knowledge</h3><p>在信号学领域，有两个非常重要的概念一个叫时域，一个叫频域。时域是以时间为自变量的描述，频域是以频率为自变量的描述。</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617225523.png" alt="image-20210617225522987"></p><p>这里要引入傅里叶变换，三角函数来组合复杂的周期函数，这些都基于三角函数的基本变化规律，如下图。</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617225946.png" alt="image-20210425121338138"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617230119.png" alt="image-20210617230119495"></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>A</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant="normal">∞</mi></munderover><msub><mi>A</mi><mi>n</mi></msub><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mi>w</mi><mi>t</mi><mo>+</mo><msub><mi>φ</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(t) = A_0 + \sum_{n=1}^\infty A_n \sin(nwt + \varphi_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em"><span style="top:-1.882887em;margin-left:0"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.151392em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:.02691em">w</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.151392em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617230140.png" alt="image-20210617230140926"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617230237.png" alt="image-20210617230236977"></p><p>有了这些基本的概念后，我们再把这些知识和图像采样联系起来，我们的在做图像采样的时候，就好像对一个函数进行离散取值，然后通过值去还原这个函数。</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618000015.png" alt="image-20210618000015644"></p><p>如果我采样的频率不够高，就会出现采样的点还原出来的函数有问题，图像有问题，如下图所示。</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617235939.png" alt="image-20210617235939019"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617230929.png" alt="image-20210617230929741"></p><p>在采样率一样的情况下，高频信号的波形完全丢失，用低频信号的频率采集的值最终和低频的信息加起来的结果就是错误的。为了保证采样的正确性，我们需要遵守<strong>奈奎斯特–香农采样定理</strong>：为了不失真地恢复模拟信号，采样频率应该不小于模拟信号频谱中<strong>最高频率</strong>的 2 倍。</p><h3 id="filter"><a class="anchor" href="#filter">#</a> Filter</h3><p>了解基本的知识背景后，我们来看图像的信息。一张图像是由一个像素矩阵构成的，现在我们把像素矩阵进行调整，只保留一行，其他行接到第一行的后面。这样我们就能把像素矩阵变成一个数组的结构，而数组的每一个值就是对应像素在图像上的值（RGB），这样我们就能把这个图像变成一个函数，既然是一个函数，我们就能够通过傅里叶级数把他转换成各种基本的周期函数的加和。同样的我们就能够对转换后的这个函数进行变换，使得时域的函数转化为频域的函数，如下图就是转化后的</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617233524.png" alt="image-20210617233524438"></p><p>当我们把中低频信号过滤掉：就会发现（高频信号主要描述细节）</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617233653.png" alt="image-20210617233653522"></p><p>当我们把中高频信号过滤掉：就会发现（低频信号主要描述整体）</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617234031.png" alt="image-20210617234031594"></p><p>滤波在数学上我们可以用 “卷积” 实现，也是滑动均值，我们这里演示低通滤波的数学表达</p><p>这里有两种方法：</p><p>方法一</p><ul><li>在时域中通过卷积滤波</li></ul><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617234400.png" alt="image-20210617234400560"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617234412.png" alt="image-20210617234412079"></p><blockquote><p>Note：时域的卷积等于频域的乘法，频域的卷积等于时域的乘法</p></blockquote><p>方法二</p><ul><li>变换到频域（傅立叶变换）</li><li>乘以卷积核的傅立叶变换</li><li>转换回空间域（逆傅立叶）</li></ul><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210617235356.png" alt="image-20210617235356107"></p><p>滤波本质其实时截断，将出现混叠的部分直接抛起</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618001017.png" alt="image-20210618001017900"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618001041.png" alt="image-20210618001041377"></p><p>然后通过像素被图像覆盖的区域然后调整像素的值：</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618001424.png" alt="image-20210618001424593"></p><h3 id="msaa"><a class="anchor" href="#msaa">#</a> MSAA</h3><p><strong>Antialiasing By Supersampling</strong>，在分辨率不够的情况下，我们假设一个像素由更多的子像素构成</p><p>然后通过计算子像素的覆盖情况来调整一个像素值</p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618001949.png" alt="image-20210618001949812"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618002012.png" alt="image-20210618002012234"></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20210618002034.png" alt="image-20210618002034828"></p><div class="tags"><a href="/tags/Math/" rel="tag"><i class="ic i-tag"></i> Math</a> <a href="/tags/Rasterization/" rel="tag"><i class="ic i-tag"></i> Rasterization</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-06-20 21:54:57" itemprop="dateModified" datetime="2021-06-20T21:54:57+08:00">2021-06-20</time></span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80MzY4Ni8yMDIyNg=="><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><noscript>为正常使用来必力评论功能请激活JavaScript</noscript></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Junwide Xiao 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Junwide Xiao 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Junwide Xiao <i class="ic i-at"><em>@</em></i>精神小伙</li><li class="link"><strong>本文链接：</strong> <a href="https://junwide.github.io/Program/math04/" title="Math in anywhere |  Rasterization">https://junwide.github.io/Program/math04/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Program/math03/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;junwide&#x2F;blog&#x2F;raw&#x2F;master&#x2F;20210418104554.jpg" title="Math in anywhere |  View"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 编程技术</span><h3>Math in anywhere | View</h3></a></div><div class="item right"></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#rasterization"><span class="toc-number">1.</span> <span class="toc-text">Rasterization</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#basic-concept"><span class="toc-number">1.1.</span> <span class="toc-text">Basic Concept</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sampling"><span class="toc-number">1.2.</span> <span class="toc-text">Sampling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#antialiasing"><span class="toc-number">1.3.</span> <span class="toc-text">Antialiasing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#background-knowledge"><span class="toc-number">1.3.1.</span> <span class="toc-text">Background Knowledge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter"><span class="toc-number">1.3.2.</span> <span class="toc-text">Filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#msaa"><span class="toc-number">1.3.3.</span> <span class="toc-text">MSAA</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/Program/SWDevelopmentSkill/" rel="bookmark" title="SW Development Skill">SW Development Skill</a></li><li><a href="/Program/math01/" rel="bookmark" title="Math in anywhere | Funciton">Math in anywhere | Funciton</a></li><li><a href="/Program/math02/" rel="bookmark" title="Math in anywhere |  Vector">Math in anywhere | Vector</a></li><li><a href="/Program/math03/" rel="bookmark" title="Math in anywhere |  View">Math in anywhere | View</a></li><li class="active"><a href="/Program/math04/" rel="bookmark" title="Math in anywhere |  Rasterization">Math in anywhere | Rasterization</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Junwide Xiao" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Junwide Xiao</p><div class="description" itemprop="description">生活与技术</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">27</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">26</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2p1bndpZGU=" title="https:&#x2F;&#x2F;github.com&#x2F;junwide"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29t" title="https:&#x2F;&#x2F;www.zhihu.com"><i class="ic i-zhihu"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20=" title="https:&#x2F;&#x2F;weibo.com"><i class="ic i-weibo"></i></span> <a href="https://junwide.github.io/about" title="https:&#x2F;&#x2F;junwide.github.io&#x2F;about" class="item about"><i class="ic i-address-card"></i></a> <span class="exturl item email" data-url="bWFpbHRvOmp1bndpZGVAb3V0bG9vay5jb20=" title="mailto:junwide@outlook.com"><i class="ic i-envelope"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly95b3V0dWJlLmNvbQ==" title="https:&#x2F;&#x2F;youtube.com"><i class="ic i-youtube"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/normal-Skill/" title="分类于 其他技巧">其他技巧</a></div><span><a href="/normal-Skill/Latex%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E8%A1%A8%E8%BE%BE%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96MD%E5%BD%A2%E5%BC%8F/" title="Latex数学公式表达以及其他MD形式">Latex数学公式表达以及其他MD形式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/linux-basic/" title="分类于 Linux基础">Linux基础</a></div><span><a href="/Linux-Basic/Kernel%20Module%20%E2%80%94%20Char%20Device%20Basic%20II/" title="Kernel Module — Char Device Basic II">Kernel Module — Char Device Basic II</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/normal-Skill/" title="分类于 其他技巧">其他技巧</a></div><span><a href="/normal-Skill/Google_%E6%90%9C%E7%B4%A2%E6%8C%87%E5%8D%97/" title="谷歌搜索技巧">谷歌搜索技巧</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Program/" title="分类于 编程技术">编程技术</a></div><span><a href="/Program/SWDevelopmentSkill/" title="SW Development Skill">SW Development Skill</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/embed-system/" title="分类于 嵌入式系统">嵌入式系统</a></div><span><a href="/embed-system/ARM_Architecture/" title="ARM-Architecture">ARM-Architecture</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/embed-system/" title="分类于 嵌入式系统">嵌入式系统</a></div><span><a href="/embed-system/MCU%E4%B8%8E%E5%B5%8C%E5%85%A5%E5%BC%8F-%E5%9F%BA%E7%A1%80%E6%A6%82%E7%8E%871/" title="01| MCU与嵌入式:基础概率">01| MCU与嵌入式:基础概率</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Program/" title="分类于 编程技术">编程技术</a></div><span><a href="/Program/math02/" title="Math in anywhere |  Vector">Math in anywhere | Vector</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/linux-basic/" title="分类于 Linux基础">Linux基础</a></div><span><a href="/Linux-Basic/devnull%20%E2%80%94%E2%80%94The%20Bit%20Bucket/" title="&#x2F;dev&#x2F;null ——The Bit Bucket 的故事">/dev/null ——The Bit Bucket 的故事</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/other/" title="分类于 杂项">杂项</a></div><span><a href="/Other/%E5%BC%80%E6%BA%90%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0%E6%B3%95/" title="协作式博客创作">协作式博客创作</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/theme-shoka-doc/" title="分类于 博客">博客</a></div><span><a href="/theme-shoka-doc/special/" title="Step.4 主题特殊功能">Step.4 主题特殊功能</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Junwide Xiao @ Brain Home</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">158k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">4:47</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"Program/math04/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>