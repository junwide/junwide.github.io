<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="ç²¾ç¥å°ä¼™" href="https://junwide.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="ç²¾ç¥å°ä¼™" href="https://junwide.github.io/atom.xml"><link rel="alternate" type="application/json" title="ç²¾ç¥å°ä¼™" href="https://junwide.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="åµŒå…¥å¼,ARM"><link rel="canonical" href="https://junwide.github.io/embed-system/ARM_Architecture/"><title>ARM-Architecture - åµŒå…¥å¼ç³»ç»Ÿ | Brain Home = ç²¾ç¥å°ä¼™ = Tech.&Mem.</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">ARM-Architecture</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2020-08-23 12:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2020-08-23T12:00:00+08:00">2020-08-23</time> </span><span class="item" title="æœ¬æ–‡å­—æ•°"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">æœ¬æ–‡å­—æ•°</span> <span>7.1k</span> <span class="text">å­—</span> </span><span class="item" title="é˜…è¯»æ—¶é•¿"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">é˜…è¯»æ—¶é•¿</span> <span>13 åˆ†é’Ÿ</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Brain Home</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104617.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104528.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104513.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104501.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104434.jpg"></li><li class="item" data-background-image="https://gitee.com/junwide/blog/raw/master/20210418104415.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/embed-system/" itemprop="item" rel="index" title="åˆ†ç±»äº åµŒå…¥å¼ç³»ç»Ÿ"><span itemprop="name">åµŒå…¥å¼ç³»ç»Ÿ</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://junwide.github.io/embed-system/ARM_Architecture/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Junwide Xiao"><meta itemprop="description" content="Tech.&Mem., ç”Ÿæ´»ä¸æŠ€æœ¯"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="ç²¾ç¥å°ä¼™"></span><div class="body md" itemprop="articleBody"><h1 id="arm-architecture"><a class="anchor" href="#arm-architecture">#</a> ARM-Architecture</h1><p><img data-src="https://gitee.com/junwide/blog/raw/master/20201007141616.jpg" alt="ARM"></p><h2 id="0-arm-overview"><a class="anchor" href="#0-arm-overview">#</a> 0. ARM overview</h2><h3 id="01-arm"><a class="anchor" href="#01-arm">#</a> 0.1 ARM</h3><p>ARM: Advance RISC Machines.</p><p>RISC: Reduced Instruction Set Computer ï¼ˆç²¾ç®€æŒ‡ä»¤é›†ï¼‰</p><ul><li>ä¸€ä¸ªå¤§å‹ç»Ÿä¸€å¯„å­˜å™¨æ–‡ä»¶ (37regs)</li><li>ä¸€ä¸ªåŠ è½½ / å­˜å‚¨æ¶æ„</li><li>ç»Ÿä¸€å›ºå®šé•¿åº¦çš„æŒ‡ä»¤å­—æ®µ (32bit A64/A32/T32, 16bit T16)</li><li>ç®€å•çš„å¯»å€æ¨¡å¼</li><li>åœ¨æ¯ä¸ªæ•°æ®å¤„ç†æŒ‡ä»¤ä¸­å¯¹ ALU å’Œç§»ä½å™¨çš„æ§åˆ¶</li><li>è‡ªåŠ¨é€’å¢å’Œè‡ªåŠ¨é€’å‡å¯»å€æ¨¡å¼</li><li>æœ‰æ¡ä»¶åœ°æ‰§è¡Œæ‰€æœ‰æŒ‡ä»¤ï¼Œä»¥æœ€å¤§åŒ–æ‰§è¡Œååé‡</li></ul><p><img data-src="https://gitee.com/junwide/blog/raw/master/20200813231957.png" alt=""></p><p>æœ¯è¯­ï¼š</p><ol><li>ARMv â€“ (4T, 5TE, 6, 7-A, 8-A) é€šç”¨æ¶æ„åç§°</li><li>AArch32 - 32 ä½æ‰§è¡Œæ€</li><li>AArch64 - 64 ä½æ‰§è¡Œæ€</li><li>A32, T32 - AArch32 ISA</li><li>A64 - AArch64 ISA</li><li>32bit æ¶æ„å’Œ 64 bit æ¶æ„ä¹‹é—´çš„äº¤äº’<ul><li>å®šä¹‰åœ¨å¼‚å¸¸æ¨¡å‹é‡Œ</li><li>AArch64 &lt;=&gt; AArch32</li></ul></li><li>æŒ‡ä»¤å›ºå®šä¸ºå°ç«¯ LE</li><li>æ•°æ®å¯ä»¥è®¾ç½® ELxï¼ˆ0: å°ç«¯ 1: å¤§ç«¯ï¼‰</li></ol><h3 id="02-arm-serial"><a class="anchor" href="#02-arm-serial">#</a> 0.2 ARM-Serial</h3><ul><li><p>Cortex-A</p><ul><li><p>é«˜æ€§èƒ½ï¼Œå…·å¤‡ MMU (VMSA)</p><blockquote><p>å¯ä»¥è¿è¡Œå¦‚ Symbianã€Linuxã€Androidï¼ŒWindows CE ç­‰æ“ä½œç³»ç»Ÿ</p></blockquote></li><li><p>æ™ºèƒ½æœºç­‰</p></li></ul></li><li><p>Cortex-R</p><ul><li>é«˜ç«¯åµŒå…¥å¼æ»¡è¶³é«˜æ€§èƒ½é«˜å¯é æ€§çš„å®æ—¶éœ€æ±‚</li><li>åŸºå¸¦ï¼Œå­˜å‚¨ï¼Œè½¦è½½ç­‰</li><li>å¯é€‰çš„ PMSA</li></ul></li><li><p>Cortex-M</p><ul><li>åµŒå…¥å¼å•ç‰‡æœºï¼Œä½åŠŸè€—ï¼Œä½æˆæœ¬</li><li>è“ç‰™ï¼Œæ¸¸æˆæœºç­‰</li><li><strong>ä»…æ”¯æŒ thumb æŒ‡ä»¤</strong></li><li>å¯é€‰çš„ PMSA</li></ul></li></ul><h3 id="03-arm-v8-a"><a class="anchor" href="#03-arm-v8-a">#</a> 0.3 ARM-v8-A</h3><p>Spec:</p><ol><li>æµ®ç‚¹ / NEON æˆä¸ºæŒ‡ä»¤é›†ä¸€éƒ¨åˆ†</li><li>8 çº§ä»¥ä¸Šçš„æµæ°´çº¿ï¼Œå¤šå‘å°„</li><li>é¡ºåº / ä¹±åºæ‰§è¡Œ</li><li>ç›´æ¥ / é—´æ¥çš„åˆ†æ”¯æŒ‡ä»¤é¢„æµ‹</li><li>L1(I-cache,D-cache)ï¼ŒMMUï¼ŒL2</li><li>è™šæ‹ŸåŒ–</li><li>å®‰å…¨æ‹“å±•æ’ä»¶</li></ol><p><img data-src="https://gitee.com/junwide/blog/raw/master/20200813231912.png" alt=""></p><h4 id="031-new-tech"><a class="anchor" href="#031-new-tech">#</a> 0.3.1 New-Tech</h4><p><strong>Super Pipeling</strong></p><p>åŠ æ·± pipeline stages æ•°ç›®çš„ pipeline æ¶æ„ï¼Œstage æ•°ç›®é€šå¸¸å¤§äº 8</p><p><strong>Super scalar</strong></p><p>å¢åŠ  functional unitsï¼Œä½¿çš„ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå¯ä»¥æ‰§è¡Œå¤šä¸ªæŒ‡ä»¤</p><p><img data-src="https://cdn.arstechnica.net/wp-content/uploads/archive/paedia/p/pipelining-2/pipelining.6.1.png" alt=""></p><p><img data-src="https://cdn.arstechnica.net/wp-content/uploads/archive/paedia/p/pipelining-2/pipelining.6.2.png" alt=""></p><ol><li>åˆ†æ”¯æŒ‡ä»¤é¢„æµ‹ (Instruction prefetch)</li><li>å–æŒ‡ (Instruction fetch)</li><li>è§£ç  (Instruction decode)</li><li>å–å¯„å­˜å™¨ (Register fetch)</li><li>å‘å°„ (Issue)</li><li>æ‰§è¡Œ (Execute)</li><li>å†…å­˜è®¿é—® (Memory access)<ul><li>Load/Store instr</li></ul></li><li>å¯„å­˜å™¨å›å†™ (Register write-back)<ul><li>LDR R1, [R4 + 4]!</li></ul></li></ol><h2 id="1-arm-model"><a class="anchor" href="#1-arm-model">#</a> 1. ARM Model</h2><h3 id="11-aarch32"><a class="anchor" href="#11-aarch32">#</a> 1.1 AArch32</h3><h4 id="111-aarch-32ä½æ‰§è¡Œæ€"><a class="anchor" href="#111-aarch-32ä½æ‰§è¡Œæ€">#</a> 1.1.1 AArch-32 ä½æ‰§è¡Œæ€</h4><ul><li><p>A32</p><blockquote><p>32 ä½å›ºå®šé•¿åº¦æŒ‡ä»¤é›†ï¼Œé€šè¿‡ä¸åŒæ¶æ„å˜ä½“å¢å¼ºéƒ¨åˆ† 32 ä½æ¶æ„æ‰§è¡Œç¯å¢ƒã€‚</p></blockquote></li><li><p>T32(Thumb - 16bit)</p><blockquote><p>æ˜¯ä»¥ 16 ä½å›ºå®šé•¿åº¦æŒ‡ä»¤é›†çš„å½¢å¼å¼•å…¥çš„ï¼Œéšååœ¨å¼•å…¥ Thumb-2 æŠ€æœ¯æ—¶å¢å¼ºä¸º 16 ä½å’Œ 32 ä½æ··åˆé•¿åº¦æŒ‡ä»¤é›†ã€‚</p></blockquote></li></ul><p><strong>é…ç½®å¦‚ä¸‹ï¼š</strong></p><ol><li><p>13 x ï¼ˆ 32bit é€šç”¨å¯„å­˜å™¨ å’Œ 32bit PC/SP/LR ï¼‰</p></li><li><p>ä¸åŒ PEï¼ˆå¤„ç†ä»¶ï¼‰ä¸‹çš„ Bank å¯„å­˜å™¨</p></li><li><p>32 x ï¼ˆ64bit å¯„å­˜å™¨ç»™ SIMD å’Œ æµ®ç‚¹å•å…ƒä½¿ç”¨æˆ·ï¼‰</p><blockquote><p>Single Instruction Multiple Data SMID</p></blockquote></li><li><p>32 bit VMSA</p></li><li><p>A32 å’Œ T32 æŒ‡ä»¤é›†</p><ul><li>BX #0 æ“ä½œæ•°å¯„å­˜å™¨ ï¼ˆ0ï¼šARM 1: Thumbï¼‰</li><li>BLX åˆ‡æ¢åœ¨ ARM å’Œ Thumb çŠ¶æ€</li></ul></li><li><p>PE çš„ PSTATE çŠ¶æ€å¯„å­˜å™¨</p><ul><li>CPSR</li></ul></li></ol><h4 id="112-aarch-32-operating-modes"><a class="anchor" href="#112-aarch-32-operating-modes">#</a> 1.1.2 AArch-32 Operating Modes</h4><p>Non-Privileged Mode</p><ul><li>User (usr)<ul><li>The normal ARM program execution state</li><li>Unable to change control bits (I,F,T,Mode[0:4]) of Program Status Register</li><li>Unable to access CP15 registers with MRC/MCR instructions</li></ul></li></ul><p>Privileged Mode</p><ul><li><p>FIQ (fiq): Designed to support a data transfer or channel process</p></li><li><p>RQ (irq): Used for general-purpose interrupt handling</p></li><li><p>Supervisor (svc): Protected mode for the operating system</p></li><li><p>Abort mode (abt): Entered after a data or instruction pre-fetch abort</p></li><li><p>System (sys) : A privileged user mode for the operating system</p></li><li><p>Undefined (und): Entered When an undefined instruction is executed</p></li></ul><table><thead><tr><th style="text-align:center"><strong>R0(a1)</strong></th><th style="text-align:center">r0</th><th style="text-align:center">r0</th><th style="text-align:center">r0</th><th style="text-align:center">r0</th><th style="text-align:center">r0</th></tr></thead><tbody><tr><td style="text-align:center"><strong>R1(a2)</strong></td><td style="text-align:center"><strong>R1</strong></td><td style="text-align:center"><strong>R1</strong></td><td style="text-align:center"><strong>R1</strong></td><td style="text-align:center"><strong>R1</strong></td><td style="text-align:center"><strong>R1</strong></td></tr><tr><td style="text-align:center"><strong>R2(a3)</strong></td><td style="text-align:center"><strong>R2</strong></td><td style="text-align:center"><strong>R2</strong></td><td style="text-align:center"><strong>R2</strong></td><td style="text-align:center"><strong>R2</strong></td><td style="text-align:center"><strong>R2</strong></td></tr><tr><td style="text-align:center"><strong>R3(a4)</strong></td><td style="text-align:center"><strong>R3</strong></td><td style="text-align:center"><strong>R3</strong></td><td style="text-align:center"><strong>R3</strong></td><td style="text-align:center"><strong>R3</strong></td><td style="text-align:center"><strong>R3</strong></td></tr><tr><td style="text-align:center"><strong>R4(v1)</strong></td><td style="text-align:center"><strong>R4</strong></td><td style="text-align:center"><strong>R4</strong></td><td style="text-align:center"><strong>R4</strong></td><td style="text-align:center"><strong>R4</strong></td><td style="text-align:center"><strong>R4</strong></td></tr><tr><td style="text-align:center"><strong>R5(v2)</strong></td><td style="text-align:center"><strong>R5</strong></td><td style="text-align:center"><strong>R5</strong></td><td style="text-align:center"><strong>R5</strong></td><td style="text-align:center"><strong>R5</strong></td><td style="text-align:center"><strong>R5</strong></td></tr><tr><td style="text-align:center"><strong>R6(v3)</strong></td><td style="text-align:center"><strong>R6</strong></td><td style="text-align:center"><strong>R6</strong></td><td style="text-align:center"><strong>R6</strong></td><td style="text-align:center"><strong>R6</strong></td><td style="text-align:center"><strong>R6</strong></td></tr><tr><td style="text-align:center"><strong>R7(v4)</strong></td><td style="text-align:center"><strong>R7</strong></td><td style="text-align:center"><strong>R7</strong></td><td style="text-align:center"><strong>R7</strong></td><td style="text-align:center"><strong>R7</strong></td><td style="text-align:center"><strong>R7</strong></td></tr><tr><td style="text-align:center"><strong>R8(v5)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R8_fiq</strong>&lt;/u&gt;</td><td style="text-align:center"><strong>R8</strong></td><td style="text-align:center"><strong>R8</strong></td><td style="text-align:center"><strong>R8</strong></td><td style="text-align:center"><strong>R8</strong></td></tr><tr><td style="text-align:center"><strong>R9(v6,SB)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R9_fiq</strong>&lt;/u&gt;</td><td style="text-align:center"><strong>R9</strong></td><td style="text-align:center"><strong>R9</strong></td><td style="text-align:center"><strong>R9</strong></td><td style="text-align:center"><strong>R9</strong></td></tr><tr><td style="text-align:center"><strong>R10(v7,SL)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R10_fiq</strong>&lt;/u&gt;</td><td style="text-align:center"><strong>R10</strong></td><td style="text-align:center"><strong>R10</strong></td><td style="text-align:center"><strong>R10</strong></td><td style="text-align:center"><strong>R10</strong></td></tr><tr><td style="text-align:center"><strong>R11(v8,FP)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R11_fiq</strong>&lt;/u&gt;</td><td style="text-align:center"><strong>R11</strong></td><td style="text-align:center"><strong>R11</strong></td><td style="text-align:center"><strong>R11</strong></td><td style="text-align:center"><strong>R11</strong></td></tr><tr><td style="text-align:center"><strong>R12(IP)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R12_fiq</strong>&lt;/u&gt;</td><td style="text-align:center"><strong>R12</strong></td><td style="text-align:center"><strong>R12</strong></td><td style="text-align:center"><strong>R12</strong></td><td style="text-align:center"><strong>R12</strong></td></tr><tr><td style="text-align:center"><strong>R13(SP)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R13_fiq</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R13_svc</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R13_abt</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R13_irq</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R13_und</strong>&lt;/u&gt;</td></tr><tr><td style="text-align:center"><strong>R14(LR)</strong></td><td style="text-align:center">&lt;u&gt;<strong>R14_fiq</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R14_svc</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R14_abt</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R14_irq</strong>&lt;/u&gt;</td><td style="text-align:center">&lt;u&gt;<strong>R14_und</strong>&lt;/u&gt;</td></tr><tr><td style="text-align:center"><strong>R15(PC)</strong></td><td style="text-align:center"><strong>R15(PC)</strong></td><td style="text-align:center"><strong>R15(PC)</strong></td><td style="text-align:center"><strong>R15(PC)</strong></td><td style="text-align:center"><strong>R15(PC)</strong></td><td style="text-align:center"><strong>R15(PC)</strong></td></tr><tr><td style="text-align:center">Sys and User</td><td style="text-align:center">FIQ</td><td style="text-align:center">SVC</td><td style="text-align:center">Abort</td><td style="text-align:center">IFQ</td><td style="text-align:center">Undefined</td></tr></tbody><tbody><tr><td style="text-align:center">CPSR</td><td style="text-align:center">CPSR</td><td style="text-align:center">CPSR</td><td style="text-align:center">CPSR</td><td style="text-align:center">CPSR</td><td style="text-align:center">CPSR</td></tr><tr><td style="text-align:center">:--:</td><td style="text-align:center">:-----------------:</td><td style="text-align:center">:-----------------:</td><td style="text-align:center">:-----------------:</td><td style="text-align:center">:-----------------:</td><td style="text-align:center">:-----------------:</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">&lt;u&gt;<strong>SPSR_fiq</strong>&lt;/u&gt;</td><td style="text-align:center"><strong>&lt;u&gt;SPSR_svc&lt;/u&gt;</strong></td><td style="text-align:center"><strong>&lt;u&gt;SPSR_abt&lt;/u&gt;</strong></td><td style="text-align:center"><strong>&lt;u&gt;SPSR_irq&lt;/u&gt;</strong></td><td style="text-align:center"><strong>&lt;u&gt;SPSR_und&lt;/u&gt;</strong></td></tr></tbody></table><ul><li><p>R13: <strong>Used for SP (stack pointer)</strong> PUSH and POP</p></li><li><p>R14ï¼š<strong>Used for LR (link register)</strong></p><ul><li>ä¿æŒ BL/BLX çš„ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€ï¼Œä¸€èˆ¬ç”¨äºå­ç¨‹åºè°ƒç”¨</li><li>åœ¨å¼‚å¸¸çŠ¶æ€ä¸‹è¿”å›åœ°å€ä¿¡æ¯</li><li>ä¹Ÿèƒ½åšä¸€èˆ¬å¯„å­˜å™¨ä½¿ç”¨</li></ul></li><li><p>R15ï¼š <strong>Dedicated for PC</strong></p><ul><li><p>æŒ‡å‘æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ä¹‹åçš„ä¸¤æ¡æŒ‡ä»¤çš„æŒ‡é’ˆ</p></li><li><p>Two State</p><p>ARMï¼š PC = current Addr. instruction + 8 bit[0:1] = 0</p><p>Thumbï¼šPC = current Addr. instruction + 4 bit[0] = 0</p></li></ul></li><li><p>CPSRï¼š<strong>Current program status register</strong></p></li><li><p>SPSRï¼š<strong>Saved program status register</strong> used by irq</p><blockquote><p>Sys/User æ²¡æœ‰ SPSR</p></blockquote></li></ul><p>Thumb State &lt;=&gt; ARM State</p><p>r0 : R7 -&gt; è®¿é—®æ–¹å¼å’Œ ARM çŠ¶æ€ä¸‹ä¸€æ · low reg</p><p>R8: R12 åªèƒ½ä½¿ç”¨ MOV ADD CMP BX è®¿é—®</p><p>R13ï¼šR15 é™åˆ¶è®¿é—®</p><p>CPSRï¼šåªèƒ½ç›´æ¥è®¿é—®</p><p>SPSRï¼šæ— æ³•è®¿é—®</p><p><strong>&lt;u&gt;Rx_xxx&lt;/u&gt;</strong>ï¼šå±äº bank å¯„å­˜å™¨</p><table><thead><tr><th style="text-align:center">31</th><th style="text-align:center">30</th><th style="text-align:center">29</th><th style="text-align:center">28</th><th style="text-align:center">27</th><th style="text-align:center">[26:25]</th><th style="text-align:center">24</th><th>[23:20]</th><th>[19:16]</th><th>[15:10]</th><th>9</th><th>8</th><th>7</th><th>6</th><th>5</th><th>[4:0]</th></tr></thead><tbody><tr><td style="text-align:center">N</td><td style="text-align:center">Z</td><td style="text-align:center">C</td><td style="text-align:center">V</td><td style="text-align:center">Q</td><td style="text-align:center">IT[1:0]</td><td style="text-align:center">J</td><td></td><td>GE[3:0]</td><td></td><td>E</td><td>A</td><td>I</td><td>F</td><td>T</td><td>Mode</td></tr></tbody></table><p>[31:24] Flags ğŸ´</p><ul><li><p>Jazelle state[24] J</p><blockquote><p>åŠ é€Ÿ Java ç¨‹åºçš„æ‰§è¡Œï¼Œå·²ç»è¿‡æ—¶äº†</p></blockquote></li><li><p>Interrupt Type Control[26:25] IT</p></li><li><p><strong>S</strong>aturation for DSP[27] Q</p></li><li><p>ALU operation overflow[28] V</p></li><li><p>ALU operation <strong>C</strong>arry out[29] C</p></li><li><p><strong>Z</strong>ero result from ALU[30] Z</p></li><li><p><strong>N</strong>egative result from ALU[31] N</p></li></ul><p>[23:16] StatusğŸ•¶</p><ul><li>For SIMD instruction[19:16] GE</li><li>Illegal execution state bit[20] IL</li><li>Software Step bit[21] SS</li><li>Reserve[23:22]</li></ul><p>[15:8]Extension ğŸ–±</p><ul><li>Imprecise Data Abort disabled [8] A</li><li>Endianness for load/store data [9] E</li><li>interrupt vector[15:10]IT</li></ul><p>[7:0]Control ğŸ›</p><ul><li>Mode [4:0]</li></ul><table><thead><tr><th style="text-align:center">Mode</th><th style="text-align:center">Operating Mode</th></tr></thead><tbody><tr><td style="text-align:center">0b10000</td><td style="text-align:center">User</td></tr><tr><td style="text-align:center">0b10001</td><td style="text-align:center">FIQ</td></tr><tr><td style="text-align:center">0b10010</td><td style="text-align:center">IRQ</td></tr><tr><td style="text-align:center">0b10011</td><td style="text-align:center">Supervisor</td></tr><tr><td style="text-align:center">0b10111</td><td style="text-align:center">Abort</td></tr><tr><td style="text-align:center">0b11011</td><td style="text-align:center">Undefined</td></tr><tr><td style="text-align:center">0b11111</td><td style="text-align:center">System</td></tr></tbody></table><ul><li>Thumb State[5] T</li><li>FIQ Disable[6] F</li><li>IRQ Disable[7] I</li></ul><blockquote><p>æ³¨ 1: è½¯ä»¶åªèƒ½é€šè¿‡ MSR/MSR æŒ‡ä»¤æ“ä½œ CPSR/SPSR</p><p>æ³¨ 2: åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œåªèƒ½æ›´æ”¹<strong> condition</strong> field [31:28]</p><p>æ³¨ 3: æ‰€æœ‰ field éƒ½å¯ä»¥åœ¨ç‰¹æƒæ¨¡å¼ä¸‹æ›´æ”¹</p><p>æ³¨ 4: æ°¸è¿œä¸è¦å¼ºåˆ¶æ”¹å˜ T å’Œ J ä½ï¼Œå¦åˆ™å¤„ç†å™¨å°†è¿›å…¥ä¸å¯é¢„çŸ¥çš„çŠ¶æ€</p><p>æ³¨ 5: filed å¯ä»¥é€šè¿‡_fsxc åç¼€å•ç‹¬è®¿é—®ï¼Œä¾‹å¦‚ï¼šMSR SPSR_c, r0</p></blockquote><h4 id="113-aarch-32-exceptional-procedure"><a class="anchor" href="#113-aarch-32-exceptional-procedure">#</a> 1.1.3 AArch-32 Exceptional Procedure</h4><table><thead><tr><th><strong>Exception</strong></th><th><strong>Mode</strong></th><th><strong>Normal Vector/Hight Vector</strong></th><th><strong>Priority</strong></th><th><strong>INT Mask</strong></th><th><strong>Produce Stage</strong></th><th><strong>Return instruction</strong></th></tr></thead><tbody><tr><td><strong>Reset</strong></td><td><strong>Supervisor</strong></td><td><strong>0x00000000/</strong> <strong>0xFFFF0000</strong></td><td><strong>1</strong></td><td><strong>I, F</strong></td><td><strong>nRESET</strong> <strong>is low</strong></td><td><strong>N/A</strong></td></tr><tr><td><strong>Undefined Instruction</strong></td><td><strong>Undefined</strong></td><td><strong>0x00000004/</strong> <strong>0XFFFF0004</strong></td><td><strong>6</strong></td><td><strong>I</strong></td><td><strong>Execute</strong></td><td><strong>MOVS PC,R14</strong></td></tr><tr><td><strong>SWI</strong></td><td><strong>Supervisor</strong></td><td><strong>0x00000008/</strong> <strong>0xFFFF0008</strong></td><td><strong>6</strong></td><td><strong>I</strong></td><td><strong>Execute</strong></td><td><strong>MOVS PC,R14</strong></td></tr><tr><td><strong>Prefetch Abort</strong></td><td><strong>Abort</strong></td><td><strong>0x0000000C/</strong> <strong>0xFFFF000C</strong></td><td><strong>5</strong></td><td><strong>I</strong></td><td><strong>Prefetch</strong></td><td><strong>SUBS PC ,R14,#4</strong></td></tr><tr><td><strong>Data Abort</strong></td><td><strong>Abort</strong></td><td><strong>0x00000010/</strong> <strong>0xFFFF0010</strong></td><td><strong>2</strong></td><td><strong>I</strong></td><td><strong>Execute</strong></td><td><strong>SUBS PC ,R14,#8</strong></td></tr><tr><td><strong>Reserved</strong></td><td><strong>N/A</strong></td><td><strong>N/A</strong></td><td><strong>N/A</strong></td><td><strong>N/A</strong></td><td><strong>N/A</strong></td><td><strong>N/A</strong></td></tr><tr><td><strong>IRQ</strong></td><td><strong>IRQ</strong></td><td><strong>0x00000018/</strong> <strong>0xFFFF0018</strong></td><td><strong>4</strong></td><td><strong>I</strong></td><td><strong>nIRQ</strong> <strong>is low</strong></td><td><strong>SUBS PC ,R14,#4</strong></td></tr><tr><td><strong>FIQ</strong></td><td><strong>FIQ</strong></td><td><strong>0x0000001C/</strong> <strong>0xFFFF001C</strong></td><td><strong>3</strong></td><td><strong>I, F</strong></td><td><strong>nFIQ</strong> <strong>is low</strong></td><td><strong>SUBS PC ,R14,#4</strong></td></tr></tbody></table><p>æ³¨ 1: PC å€¼æ˜¯å¼‚å¸¸ç”Ÿæˆæ—¶æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€</p><p>æ³¨ 2: æ— è®ºåœ¨å“ªç§çŠ¶æ€ä¸‹ç”Ÿæˆå¼‚å¸¸ï¼Œå¤„ç†å™¨éƒ½å°†è¿›å…¥ ARM çŠ¶æ€</p><p>æ³¨ 3: åœ¨è¿”å›æ—¶ä¸éœ€è¦å…³å¿ƒå®ƒåœ¨è¿›å…¥å¼‚å¸¸ä¹‹å‰çš„çŠ¶æ€ã€‚æ— è®º ARM æˆ– Thumb çš„å£°æ˜ï¼Œéƒ½ä½¿ç”¨ç›¸åŒçš„å›è°ƒåœ°å€</p><p><strong>Flow</strong></p><p><img data-src="https://gitee.com/junwide/blog/raw/master/20200813232358.png" alt="image-20200813232358727"></p><h3 id="12-aarch64"><a class="anchor" href="#12-aarch64">#</a> 1.2 AArch64</h3><h4 id="121-aarch-64"><a class="anchor" href="#121-aarch-64">#</a> 1.2.1 AArch-64</h4><ul><li><p>A64</p><blockquote><p>æä¾›ä¸ ARM å’Œ Thumb æŒ‡ä»¤é›†ç±»ä¼¼åŠŸèƒ½çš„ 32 ä½å›ºå®šé•¿åº¦æŒ‡ä»¤é›†ã€‚éš ARMv8-A ä¸€èµ·å¼•å…¥ï¼Œå®ƒæ˜¯ä¸€ç§ AArch64 æŒ‡ä»¤é›†ã€‚</p></blockquote></li></ul><p><strong>é…ç½®å¦‚ä¸‹ï¼š</strong></p><ol><li><p>31 x 64bit é€šç”¨å¯„å­˜å™¨ X30 ä½œä¸º LR</p><ul><li>64 ä½å¯„å­˜å™¨ X0 ~ X30ï¼Œ32 ä½å¯„å­˜å™¨ W0 ~ W30</li></ul></li><li><p>ä¸åŒ PEï¼ˆå¤„ç†ä»¶ï¼‰ä¸‹çš„ Bank å¯„å­˜å™¨</p></li><li><p>32 x ï¼ˆ128bit å¯„å­˜å™¨ç»™ SIMD å’Œ æµ®ç‚¹å•å…ƒä½¿ç”¨ï¼‰</p><blockquote><p>Single Instruction Multiple Data SMID</p></blockquote></li><li><p>64 bit VMSA</p></li><li><p>A64 æŒ‡ä»¤é›†</p></li><li><p>PE çš„ PSTATE çŠ¶æ€å¯„å­˜å™¨</p><ul><li>ä¸æ­¢ä¸€ä¸ª</li></ul></li><li><p>å¼‚å¸¸æ¨¡å‹ï¼šå‡å°‘ Banked å¯„å­˜å™¨ / æ¨¡å¼</p><ul><li>EL0~3 å…± 4 çº§å¼‚å¸¸æ¨¡å‹</li></ul></li></ol><h4 id="122-aarch-64-operating-modes"><a class="anchor" href="#122-aarch-64-operating-modes">#</a> 1.2.2 AArch-64 Operating Modes</h4><p>4 çº§ EL ä»£æ›¿ 8 ç§ä¸åŒçš„å¤„ç†å™¨æ¨¡å¼</p><ul><li><p>ç±»ä¼¼ x86 æ¶æ„çš„ RING</p></li><li><p>EL0: éç‰¹æƒç­‰çº§ï¼Œåº”ç”¨ç¨‹åºè¿è¡Œåœ¨æ­¤ç­‰çº§ Usr mode</p></li><li><p>EL1: ç‰¹æƒç­‰çº§ï¼Œç”¨äºè¿è¡Œ kernel</p></li><li><p>EL2: virtualization on Non-secure</p><ul><li>å¯è¿è¡Œ Hypervisor</li></ul></li><li><p>EL3: æ”¯æŒåˆ‡æ¢ Secure æ€å’Œ Non-secure æ€</p><ul><li>å¯è¿è¡Œ Secure monitor</li></ul></li><li><p>EL1~3 æœ‰ç‹¬è‡ªçš„ ELR/SP/SPSR banked å¯„å­˜å™¨</p></li></ul><blockquote><p>å®é™…è®¾è®¡ä¸­ EL0 ~ 1 å¿…é¡»ï¼ŒEL2~3 å¯é€‰ã€‚</p><p>PE å¯èƒ½æ˜¯ EL0,EL1,EL3</p></blockquote><ul><li><p>64 ä½ SP (XSP/WSP)</p><ul><li>å¿…é¡» 16 å­—èŠ‚å¯¹é½ (å¦åˆ™äº§ç”Ÿæ ˆå¯¹é½å¼‚å¸¸)</li><li>åœ¨ EL1 å¯æ›´æ”¹è¿™ä¸ªè®¾å®š</li></ul></li><li><p>64 ä½ PC</p><ul><li>åœ¨ä¸æ˜¯ 4 å­—èŠ‚å¯¹é½çš„åœ°å€ä¸Šæ‰§è¡Œå°†äº§ç”Ÿå¯¹é½å¼‚å¸¸</li></ul></li><li><p>Unbanked å¯„å­˜å™¨</p><ul><li>X0 ~ 30ï¼ŒV0 ~ 31</li></ul></li><li><p>Banked å¯„å­˜å™¨</p><ul><li>ä¸»è¦ç”¨äºå¼‚å¸¸è¿”å›ä¿¡æ¯ / SP</li></ul></li></ul><table><thead><tr><th></th><th><strong>EL0</strong></th><th><strong>EL1</strong></th><th><strong>EL2</strong></th><th><strong>EL3</strong></th><th></th></tr></thead><tbody><tr><td>SP = Stack Ptr</td><td>SP_EL0</td><td>SP_EL1</td><td>SP_EL2</td><td>SP_EL3</td><td></td></tr><tr><td>ELR = Exception Link Register</td><td></td><td>ELR_EL1</td><td>ELR_EL2</td><td>ELR_EL3</td><td>(PC)</td></tr><tr><td>Saved/Current Process Status Register</td><td></td><td>SPSR_EL1</td><td>SPSR_EL2</td><td>SPSR_EL3</td><td>(CPSR)</td></tr></tbody></table><table><thead><tr><th style="text-align:center">31</th><th style="text-align:center">30</th><th style="text-align:center">29</th><th style="text-align:center">28</th><th style="text-align:center">[27:24]</th><th style="text-align:center">[23:22]</th><th style="text-align:center">21</th><th>20</th><th>[19:10]</th><th>9</th><th>8</th><th>7</th><th>6</th><th>5</th><th>4</th><th>[3:0]</th></tr></thead><tbody><tr><td style="text-align:center">N</td><td style="text-align:center">Z</td><td style="text-align:center">C</td><td style="text-align:center">V</td><td style="text-align:center">RES0</td><td style="text-align:center">RES0</td><td style="text-align:center">SS</td><td>IL</td><td>RES0</td><td>D</td><td>A</td><td>I</td><td>F</td><td>RES0</td><td>M</td><td>Mode</td></tr></tbody></table><p>[31:24] Flags ğŸ´</p><ul><li>Reserve[24:27]</li><li>ALU operation overflow[28] V</li><li>ALU operation <strong>C</strong>arry out[29] C</li><li><strong>Z</strong>ero result from ALU[30] Z</li><li><strong>N</strong>egative result from ALU[31] N</li></ul><p>[23:20] StatusğŸ•¶</p><ul><li>Illegal execution state bit[20] IL</li><li>Software Step bit[21] SS</li><li>Reserve[23:22]</li></ul><p>[19:8]Extension ğŸ–±</p><ul><li>Imprecise Data Abort disabled [8] A</li><li>Debug mask bit [9] D</li><li>RES0[19:10]</li></ul><p>[7:0]Control ğŸ›</p><ul><li>Mode [3:0]</li></ul><table><thead><tr><th style="text-align:center">Mode</th><th style="text-align:center">Exception level and SP</th></tr></thead><tbody><tr><td style="text-align:center">0b1101</td><td style="text-align:center">EL3h</td></tr><tr><td style="text-align:center">0b1100</td><td style="text-align:center">EL3t</td></tr><tr><td style="text-align:center">0b1001</td><td style="text-align:center">EL2h</td></tr><tr><td style="text-align:center">0b1000</td><td style="text-align:center">EL2t</td></tr><tr><td style="text-align:center">0b0101</td><td style="text-align:center">EL1h</td></tr><tr><td style="text-align:center">0b0100</td><td style="text-align:center">EL1t</td></tr><tr><td style="text-align:center">0b0000</td><td style="text-align:center">EL0t</td></tr></tbody></table><ul><li>Execution State[4] M 1:AArch32 0:AArch64</li><li>Reserve[5]</li><li>FIQ Disable[6] F</li><li>IRQ Disable[7] I</li></ul><table><thead><tr><th></th><th><strong>ILP32</strong></th><th><strong>LP64</strong></th><th><strong>LLP64</strong></th><th><strong>ILP64</strong></th></tr></thead><tbody><tr><td>char</td><td>8</td><td></td><td></td><td></td></tr><tr><td>short</td><td>16</td><td></td><td></td><td></td></tr><tr><td>int</td><td>32</td><td>32</td><td>32</td><td>64</td></tr><tr><td>long</td><td>32</td><td>64</td><td>32</td><td>64</td></tr><tr><td>long long</td><td>64</td><td></td><td></td><td></td></tr><tr><td>size_t</td><td>32</td><td>64</td><td>64</td><td>64</td></tr><tr><td>pointer</td><td>32</td><td>64</td><td>64</td><td>64</td></tr></tbody></table><h4 id="123-aarch-64-exceptional-procedure"><a class="anchor" href="#123-aarch-64-exceptional-procedure">#</a> 1.2.3 AArch-64 Exceptional Procedure</h4><ul><li><p>å¼‚å¸¸è¿”å›åœ°å€å†™å…¥ ELR</p></li><li><p>è¿›å…¥å¼‚å¸¸æ—¶å…³é—­æ‰€æœ‰ä¸­æ–­</p></li><li><p>å¼‚å¸¸å‘ç”Ÿæ—¶æˆ–è¿”å›</p><ul><li>è¿›å…¥å¼‚å¸¸ï¼šå¢åŠ  EL ç­‰çº§æˆ–ç»´æŒä¸å˜</li><li>å¼‚å¸¸è¿”å›ï¼šå‡å°‘ EL ç­‰çº§æˆ–ç»´æŒä¸å˜</li></ul></li><li><p>EL1~3 æœ‰ä¸åŒçš„å¼‚å¸¸å‘é‡åœ°å€ (VBAR) å¯„å­˜å™¨</p></li><li><p>å¼‚å¸¸å‘é‡åŒ…å«</p><ul><li><p>å¼‚å¸¸ç±»å‹ï¼š</p><ol><li><p>synchronous(MMU abort),</p></li><li><p>IRQ, FIQ or System Error</p></li><li><p>Exception origin (same or lower EL) and register width</p></li></ol></li></ul></li><li><p>å¼‚å¸¸åŸå› å¯„å­˜å™¨ (æä¾›å¼‚å¸¸ç»†èŠ‚)</p><ul><li>å¼‚å¸¸ç±»å‹</li><li>æŒ‡ä»¤é•¿åº¦ (AArch32)</li><li>æŒ‡ä»¤ç›¸å…³ä¿¡æ¯</li></ul></li><li><p>VBAR</p></li></ul><p><img data-src="https://gitee.com/junwide/blog/raw/master/20200813232823.png" alt=""></p><h2 id="2-arm-aarch32-aarch64"><a class="anchor" href="#2-arm-aarch32-aarch64">#</a> 2. ARM Aarch32 - Aarch64</h2><p><img data-src="https://gitee.com/junwide/blog/raw/master/20200813232654.png" alt="image-20200813232654428"></p><p>2 ç§æ‰§è¡Œæ€</p><ul><li><p>AArch64ï¼š64 ä½æ‰§è¡Œç¯å¢ƒ</p></li><li><p>AArch32ï¼š32 ä½æ‰§è¡Œç¯å¢ƒï¼Œå…¼å®¹ ARMv7-A</p></li></ul><p>ä¸åŒçš„ EL ç­‰çº§å¯ä»¥æœ‰ä¸åŒçš„æ‰§è¡Œæ€</p><ul><li><p>EL0 ç”±å¼‚å¸¸è¿”å›ä¿¡æ¯æŒ‡å®š</p></li><li><p>ç”±é«˜ EL çš„ç³»ç»Ÿå¯„å­˜å™¨æŒ‡å®š</p></li></ul><table><thead><tr><th><strong>å¼‚å¸¸ç­‰çº§</strong></th><th><strong>ç»„åˆ</strong> 1</th><th><strong>ç»„åˆ</strong> 2</th><th><strong>ç»„åˆ</strong> 3</th><th><strong>ç»„åˆ</strong> 4</th><th><strong>ç»„åˆ</strong> 5</th></tr></thead><tbody><tr><td>EL0</td><td>AArch64</td><td>AArch32</td><td>AArch32</td><td>AArch32</td><td>AArch32</td></tr><tr><td>EL1</td><td>AArch64</td><td>AArch64</td><td>AArch32</td><td>AArch32</td><td>AArch32</td></tr><tr><td>EL2</td><td>AArch64</td><td>AArch64</td><td>AArch64</td><td>AArch32</td><td>AArch32</td></tr><tr><td>EL3</td><td>AArch64</td><td>AArch64</td><td>AArch64</td><td>AArch64</td><td>AArch32</td></tr></tbody></table><p>å¦‚å›¾ï¼š</p><p>å½“è¿›å…¥é«˜ EL æ—¶æœ‰ä¸¤ç§ç­–ç•¥</p><ol><li>æ‰§è¡Œæ€ä¿æŒä¸å˜</li><li>ç”± AArch32 =&gt; AArch64</li></ol><p>å½“è¿”å›ä½ EL æ—¶æœ‰ä¸¤ç§ç­–ç•¥</p><ol><li>æ‰§è¡Œæ€ä¿æŒä¸å˜</li><li>ç”± AArch64 =&gt; AArch32</li></ol><p>å¯„å­˜å™¨æ˜ å°„</p><table><thead><tr><th><strong>æ˜ å°„</strong></th><th><strong>X0~X7</strong></th><th><strong>X8~X15</strong></th><th><strong>X15-X23</strong></th><th><strong>X24~X30</strong></th></tr></thead><tbody><tr><td>0</td><td>R0</td><td>R8_usr</td><td>R14_irq</td><td>R8_fiq</td></tr><tr><td>1</td><td>R1</td><td>R9_usr</td><td>R13_irq</td><td>R9_fiq</td></tr><tr><td>2</td><td>R2</td><td>R10_usr</td><td>R14_svc</td><td>R10_fiq</td></tr><tr><td>3</td><td>R3</td><td>R11_usr</td><td>R13_svc</td><td>R11_fiq</td></tr><tr><td>4</td><td>R4</td><td>R12_usr</td><td>R14_abt</td><td>R12_fiq</td></tr><tr><td>5</td><td>R5</td><td>R13_usr</td><td>R13_abt</td><td>R13_fiq</td></tr><tr><td>6</td><td>R6</td><td>R14_usr</td><td>R14_und</td><td>R14_fiq</td></tr><tr><td>7</td><td>R7</td><td>R13_hyp</td><td>R13_und</td><td>N/A</td></tr></tbody><tbody><tr><td>AArch32</td><td>AArch64</td></tr><tr><td>:------:</td><td>:------:</td></tr><tr><td>SPSR_svc</td><td>SPSR_EL1</td></tr><tr><td>SPSR_hyp</td><td>SPSR_EL2</td></tr><tr><td>ELR_hyp</td><td>ELR_EL2</td></tr></tbody></table><p>é“¾æ¥åªèƒ½ç”¨å„è‡ªçš„åº“æ— æ³•æ··ç€é“¾æ¥ï¼ï¼ï¼</p><div class="tags"><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" rel="tag"><i class="ic i-tag"></i> åµŒå…¥å¼</a> <a href="/tags/ARM/" rel="tag"><i class="ic i-tag"></i> ARM</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-18 20:37:07" itemprop="dateModified" datetime="2021-04-18T20:37:07+08:00">2021-04-18</time></span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80MzY4Ni8yMDIyNg=="><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript></div><div class="reward"><button><i class="ic i-heartbeat"></i> èµèµ</button><p>è¯·æˆ‘å–[èŒ¶]~(ï¿£â–½ï¿£)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Junwide Xiao å¾®ä¿¡æ”¯ä»˜"><p>å¾®ä¿¡æ”¯ä»˜</p></div><div><img data-src="/images/alipay.png" alt="Junwide Xiao æ”¯ä»˜å®"><p>æ”¯ä»˜å®</p></div></div></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Junwide Xiao <i class="ic i-at"><em>@</em></i>ç²¾ç¥å°ä¼™</li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://junwide.github.io/embed-system/ARM_Architecture/" title="ARM-Architecture">https://junwide.github.io/embed-system/ARM_Architecture/</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/theme-shoka-doc/special/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;junwide&#x2F;blog&#x2F;raw&#x2F;master&#x2F;20210418104528.jpg" title="Step.4 ä¸»é¢˜ç‰¹æ®ŠåŠŸèƒ½"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> åšå®¢</span><h3>Step.4 ä¸»é¢˜ç‰¹æ®ŠåŠŸèƒ½</h3></a></div><div class="item right"><a href="/Other/%E5%BC%80%E6%BA%90%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0%E6%B3%95/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;junwide&#x2F;blog&#x2F;raw&#x2F;master&#x2F;20210418104528.jpg" title="åä½œå¼åšå®¢åˆ›ä½œ"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> æ‚é¡¹</span><h3>åä½œå¼åšå®¢åˆ›ä½œ</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#arm-architecture"><span class="toc-number">1.</span> <span class="toc-text">ARM-Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-arm-overview"><span class="toc-number">1.1.</span> <span class="toc-text">0. ARM overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#01-arm"><span class="toc-number">1.1.1.</span> <span class="toc-text">0.1 ARM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#02-arm-serial"><span class="toc-number">1.1.2.</span> <span class="toc-text">0.2 ARM-Serial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#03-arm-v8-a"><span class="toc-number">1.1.3.</span> <span class="toc-text">0.3 ARM-v8-A</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#031-new-tech"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">0.3.1 New-Tech</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-arm-model"><span class="toc-number">1.2.</span> <span class="toc-text">1. ARM Model</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-aarch32"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.1 AArch32</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#111-aarch-32%E4%BD%8D%E6%89%A7%E8%A1%8C%E6%80%81"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">1.1.1 AArch-32 ä½æ‰§è¡Œæ€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#112-aarch-32-operating-modes"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">1.1.2 AArch-32 Operating Modes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#113-aarch-32-exceptional-procedure"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">1.1.3 AArch-32 Exceptional Procedure</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-aarch64"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2 AArch64</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#121-aarch-64"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1.2.1 AArch-64</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#122-aarch-64-operating-modes"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">1.2.2 AArch-64 Operating Modes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#123-aarch-64-exceptional-procedure"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">1.2.3 AArch-64 Exceptional Procedure</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-arm-aarch32-aarch64"><span class="toc-number">1.3.</span> <span class="toc-text">2. ARM Aarch32 - Aarch64</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/embed-system/MCU%E4%B8%8E%E5%B5%8C%E5%85%A5%E5%BC%8F-%E5%9F%BA%E7%A1%80%E6%A6%82%E7%8E%871/" rel="bookmark" title="01| MCUä¸åµŒå…¥å¼:åŸºç¡€æ¦‚ç‡">01| MCUä¸åµŒå…¥å¼:åŸºç¡€æ¦‚ç‡</a></li><li><a href="/embed-system/%E7%AE%80%E5%8D%95MCU%E8%AF%BE%E8%AE%BE%E5%BC%80%E6%BA%90--%E7%94%B5%E5%AD%90%E9%92%9F/" rel="bookmark" title="ç®€å•MCUè¯¾è®¾å¼€æº--ç”µå­é’Ÿ">ç®€å•MCUè¯¾è®¾å¼€æº--ç”µå­é’Ÿ</a></li><li class="active"><a href="/embed-system/ARM_Architecture/" rel="bookmark" title="ARM-Architecture">ARM-Architecture</a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Junwide Xiao" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Junwide Xiao</p><div class="description" itemprop="description">ç”Ÿæ´»ä¸æŠ€æœ¯</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">25</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span> <span class="name">åˆ†ç±»</span></a></div><div class="item tags"><a href="/tags/"><span class="count">24</span> <span class="name">æ ‡ç­¾</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2p1bndpZGU=" title="https:&#x2F;&#x2F;github.com&#x2F;junwide"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29t" title="https:&#x2F;&#x2F;www.zhihu.com"><i class="ic i-zhihu"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20=" title="https:&#x2F;&#x2F;weibo.com"><i class="ic i-weibo"></i></span> <a href="https://junwide.github.io/about" title="https:&#x2F;&#x2F;junwide.github.io&#x2F;about" class="item about"><i class="ic i-address-card"></i></a> <span class="exturl item email" data-url="bWFpbHRvOmp1bndpZGVAb3V0bG9vay5jb20=" title="mailto:junwide@outlook.com"><i class="ic i-envelope"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly95b3V0dWJlLmNvbQ==" title="https:&#x2F;&#x2F;youtube.com"><i class="ic i-youtube"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>å…³äº</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>å½’æ¡£</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/theme-shoka-doc/special/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/Other/%E5%BC%80%E6%BA%90%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0%E6%B3%95/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/linux-basic/" title="åˆ†ç±»äº LinuxåŸºç¡€">LinuxåŸºç¡€</a></div><span><a href="/Linux-Basic/Kernel%20Module%20%E2%80%94%20Char%20Device%20Basic%20II/" title="Kernel Module â€” Char Device Basic II">Kernel Module â€” Char Device Basic II</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/linux-basic/" title="åˆ†ç±»äº LinuxåŸºç¡€">LinuxåŸºç¡€</a></div><span><a href="/Linux-Basic/UPBoard%20%E4%BC%98%E5%8C%96%E4%BF%AE%E5%A4%8D%E6%8C%87%E5%8D%97/" title="UPBoard ä¼˜åŒ–ä¿®å¤æŒ‡å—">UPBoard ä¼˜åŒ–ä¿®å¤æŒ‡å—</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/linux-basic/" title="åˆ†ç±»äº LinuxåŸºç¡€">LinuxåŸºç¡€</a></div><span><a href="/Linux-Basic/Linux%20Kernel%20Build/" title="Linux Kernel Build">Linux Kernel Build</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/normal-Skill/" title="åˆ†ç±»äº å…¶ä»–æŠ€å·§">å…¶ä»–æŠ€å·§</a></div><span><a href="/normal-Skill/Git_%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8/" title="Git çš„æ—¥å¸¸ä½¿ç”¨">Git çš„æ—¥å¸¸ä½¿ç”¨</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/linux-basic/" title="åˆ†ç±»äº LinuxåŸºç¡€">LinuxåŸºç¡€</a></div><span><a href="/Linux-Basic/devnull%20%E2%80%94%E2%80%94The%20Bit%20Bucket/" title="&#x2F;dev&#x2F;null â€”â€”The Bit Bucket çš„æ•…äº‹">/dev/null â€”â€”The Bit Bucket çš„æ•…äº‹</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/normal-Skill/" title="åˆ†ç±»äº å…¶ä»–æŠ€å·§">å…¶ä»–æŠ€å·§</a></div><span><a href="/normal-Skill/Latex%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E8%A1%A8%E8%BE%BE%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96MD%E5%BD%A2%E5%BC%8F/" title="Latexæ•°å­¦å…¬å¼è¡¨è¾¾ä»¥åŠå…¶ä»–MDå½¢å¼">Latexæ•°å­¦å…¬å¼è¡¨è¾¾ä»¥åŠå…¶ä»–MDå½¢å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Program/" title="åˆ†ç±»äº ç¼–ç¨‹æŠ€æœ¯">ç¼–ç¨‹æŠ€æœ¯</a></div><span><a href="/Program/math01/" title="Math in anywhere | Funciton">Math in anywhere | Funciton</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/theme-shoka-doc/" title="åˆ†ç±»äº åšå®¢">åšå®¢</a></div><span><a href="/theme-shoka-doc/special/" title="Step.4 ä¸»é¢˜ç‰¹æ®ŠåŠŸèƒ½">Step.4 ä¸»é¢˜ç‰¹æ®ŠåŠŸèƒ½</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Program/" title="åˆ†ç±»äº ç¼–ç¨‹æŠ€æœ¯">ç¼–ç¨‹æŠ€æœ¯</a></div><span><a href="/Program/math02/" title="Math in anywhere |  Vector">Math in anywhere | Vector</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/embed-system/" title="åˆ†ç±»äº åµŒå…¥å¼ç³»ç»Ÿ">åµŒå…¥å¼ç³»ç»Ÿ</a></div><span><a href="/embed-system/ARM_Architecture/" title="ARM-Architecture">ARM-Architecture</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 â€“ <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Junwide Xiao @ Brain Home</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="ç«™ç‚¹æ€»å­—æ•°">138k å­—</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">4:11</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"embed-system/ARM_Architecture/",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",hide:"(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>